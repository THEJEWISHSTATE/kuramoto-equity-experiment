<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>‚öñÔ∏è Confronto Equo vs Iniquo</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font: 22px 'Arial'; background: #FFF; color: #000; padding: 15px; }
        .container { max-width: 1000px; margin: auto; }
        
        header { text-align: center; margin: 15px 0; padding-bottom: 15px; border-bottom: 2px solid #000; }
        h1 { font-size: 36px; margin: 10px 0; }
        
        /* DUE COLONNE AFFIANCATE */
        .comparison { display: flex; gap: 20px; margin: 20px 0; }
        .column { flex: 1; }
        .system-box { 
            background: #FFF; 
            border: 2px solid #000; 
            border-radius: 8px; 
            padding: 15px; 
            margin-bottom: 15px; 
        }
        .system-title { 
            font-size: 24px; 
            font-weight: bold; 
            text-align: center; 
            margin-bottom: 15px; 
            padding: 10px; 
            border-radius: 5px; 
        }
        .equo-title { background: #E8F5E8; border: 2px solid #2E7D32; }
        .iniquo-title { background: #FFEBEE; border: 2px solid #C62828; }
        
        canvas { display: block; margin: auto; background: #FFF; border: 1px solid #CCC; }
        
        /* CONTROLLI CONFRONTO */
        .controls { 
            background: #F5F5F5; 
            border: 2px solid #000; 
            border-radius: 8px; 
            padding: 20px; 
            margin: 20px 0; 
            text-align: center; 
        }
        
        .btn { 
            font-size: 20px; 
            padding: 15px 25px; 
            margin: 0 10px 10px 0; 
            border: 2px solid #000; 
            border-radius: 6px; 
            cursor: pointer; 
            font-weight: bold; 
        }
        .btn-compare { background: #000; color: #FFF; }
        .btn-reset { background: #FFF; color: #000; }
        
        /* RISULTATI */
        .results { 
            background: #FFF; 
            border: 2px solid #0066CC; 
            border-radius: 8px; 
            padding: 20px; 
            margin: 20px 0; 
        }
        .result-row { 
            display: flex; 
            justify-content: space-between; 
            margin: 15px 0; 
            padding: 15px; 
            background: #F8F8F8; 
            border-radius: 6px; 
        }
        .result-label { font-weight: bold; font-size: 20px; }
        .result-value { font-size: 28px; font-weight: bold; }
        .advantage { color: #2E7D32; }
        .disadvantage { color: #C62828; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>‚öñÔ∏è CONFRONTO EQUO vs INIQUO</h1>
            <p style="font-size:20px; color:#333;">Scoperta principale: Sistemi EQUI sincronizzano con 4√ó MENO accoppiamento + STABILIT√Ä INTRINSECA</p>
        </header>
        
        <!-- DUE SISTEMI AFFIANCATI -->
        <div class="comparison">
            <!-- SISTEMA EQUO -->
            <div class="column">
                <div class="system-box">
                    <div class="system-title equo-title">
                        ‚úÖ SISTEMA EQUO<br>
                        <span style="font-size:18px;">(Distribuzione uniforme K)</span>
                    </div>
                    <canvas id="equoCanvas" width="400" height="300"></canvas>
                    <div style="text-align:center; margin-top:15px;">
                        <div style="font-size:20px; font-weight:bold;">R (Sincronizzazione):</div>
                        <div id="equoR" style="font-size:32px; font-weight:bold; color:#2E7D32;">0.000</div>
                    </div>
                </div>
            </div>
            
            <!-- SISTEMA INIQUO -->
            <div class="column">
                <div class="system-box">
                    <div class="system-title iniquo-title">
                        ‚ùå SISTEMA INIQUO<br>
                        <span style="font-size:18px;">(Distribuzione esponenziale K)</span>
                    </div>
                    <canvas id="iniquoCanvas" width="400" height="300"></canvas>
                    <div style="text-align:center; margin-top:15px;">
                        <div style="font-size:20px; font-weight:bold;">R (Sincronizzazione):</div>
                        <div id="iniquoR" style="font-size:32px; font-weight:bold; color:#C62828;">0.000</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- CONTROLLI -->
        <div class="controls">
            <h2 style="margin-bottom:20px;">üéÆ CONTROLLI ESPERIMENTO</h2>
            
            <div>
                <label style="font-size:20px; font-weight:bold;">
                    Œ± (Accoppiamento): <span id="alphaValue" style="font-size:24px;">1.0</span>
                </label>
                <input type="range" id="alphaSlider" min="0" max="3" step="0.1" value="1.0" 
                       style="width:80%; height:30px; margin:10px 0;">
            </div>
            
            <div style="margin:20px 0;">
                <button class="btn btn-compare" onclick="startComparison()">
                    ‚ñ∂Ô∏è AVVIA CONFRONTO
                </button>
                <button class="btn btn-reset" onclick="resetComparison()">
                    üîÑ RESET
                </button>
                <button class="btn" onclick="runCriticalAlphaTest()" 
                        style="background:#673AB7; color:#FFF; border-color:#5E35B1;">
                    üß™ TEST Œ± CRITICO
                </button>
            </div>
        </div>
        
        <!-- RISULTATI -->
        <div class="results">
            <h2 style="text-align:center; margin-bottom:20px;">üìä RISULTATI CONFRONTO</h2>
            
            <div class="result-row">
                <div class="result-label">Differenza R (Œî):</div>
                <div class="result-value" id="deltaR">+0.000</div>
            </div>
            
            <div class="result-row">
                <div class="result-label">Vantaggio Equo:</div>
                <div class="result-value" id="advantage">0%</div>
            </div>
            
            <div class="result-row">
                <div class="result-label">Œ± critico Equo:</div>
                <div class="result-value advantage" id="alphaCritEquo">0.25-0.30</div>
            
            <div class="result-row">
                <div class="result-label">Œ± critico Iniquo:</div>
                <div class="result-value disadvantage" id="alphaCritIniquo">1.986</div>
            </div>
            
            <div class="result-row" style="background:#E8F5E8;">
                <div class="result-label">üéØ SCOPERTA PRINCIPALE:</div>
                <div class="result-value advantage" id="discovery">4√ó MENO accoppiamento!</div>
            </div>
        </div>
        
        <!-- SPIEGAZIONE -->
        <div style="background:#FFF8E1; padding:20px; border-radius:8px; border:2px solid #FF9800; margin:20px 0;">
            <h3>üìö SPIEGAZIONE SCIENTIFICA</h3>
            <p style="font-size:18px; line-height:1.6; margin-top:10px;">
                <strong>Sistema EQUO:</strong> Tutti gli oscillatori hanno forza di accoppiamento simile (K uniforme).<br>
                <strong>Sistema INIQUO:</strong> Alcuni oscillatori sono molto pi√π connessi di altri (K esponenziale).<br><br>
                <strong>Scoperta:</strong> Il sistema EQUO raggiunge la sincronizzazione con Œ±‚âà0.25-0.30,<br>
mentre quello INIQUO non sincronizza MAI stabilmente (comportamento caotico!).
            </p>
        </div>
        
        <footer style="text-align:center; margin-top:30px; padding-top:15px; border-top:1px solid #000;">
            <p>üî¨ Esperimento conferma: Œ±_c_equo = 0.25-0.30 vs Œ±_c_iniquo = MAI STABILE</p>
            <p>üìÅ File: <strong>confronto_equo_iniquo.html</strong></p>
        </footer>
    </div>

    <script>
        // ============================================
        // CONFRONTO EQUO vs INIQUO
        // ============================================
        
        // CANVAS
        const equoCanvas = document.getElementById('equoCanvas');
        const equoCtx = equoCanvas.getContext('2d');
        const iniquoCanvas = document.getElementById('iniquoCanvas');
        const iniquoCtx = iniquoCanvas.getContext('2d');
        
        // STATO
        let isComparing = false;
        let time = 0;
        
        // OSCILLATORI
        let equoOscillators = [];
        let iniquoOscillators = [];
        
        // INIZIALIZZA
        function init() {
            time = 0;
            createOscillators();
            drawBothSystems();
            updateResults();
        }
        
        // CREA OSCILLATORI CON DISTRIBUZIONI DIVERSE
        function createOscillators() {
            equoOscillators = [];
            iniquoOscillators = [];
            
            // SISTEMA EQUO: K uniforme (tutti simili)
            for (let i = 0; i < 6; i++) {
                equoOscillators.push({
                    id: i,
                    phase: Math.random() * 2 * Math.PI,
                    freq: 0.5 + Math.random() * 0.5,
                    K: 1.0, // UNIFORME
                    x: 0, y: 0
                });
            }
            
            // SISTEMA INIQUO: K esponenziale (alcuni molto forti)
            for (let i = 0; i < 6; i++) {
                iniquoOscillators.push({
                    id: i,
                    phase: Math.random() * 2 * Math.PI,
                    freq: 0.5 + Math.random() * 0.5,
                    K: 0.2 + Math.exp(i * 0.5), // ESPONENZIALE
                    x: 0, y: 0
                });
            }
        }
        
        // DISEGNA ENTRAMBI I SISTEMI
        function drawBothSystems() {
            drawSystem(equoCtx, equoCanvas, equoOscillators, '#2E7D32');
            drawSystem(iniquoCtx, iniquoCanvas, iniquoOscillators, '#C62828');
        }
        
        function drawSystem(ctx, canvas, oscillators, color) {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const cx = canvas.width / 2;
            const cy = canvas.height / 2;
            const r = 100;
            
            // CERCHIO
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.arc(cx, cy, r, 0, Math.PI * 2);
            ctx.stroke();
            
            // OSCILLATORI
            oscillators.forEach((o, i) => {
                o.x = cx + r * Math.cos(o.phase);
                o.y = cy + r * Math.sin(o.phase);
                
                // DIMENSIONE in base a K
                const size = 10 + (o.K * 5);
                
                ctx.fillStyle = color;
                ctx.beginPath();
                ctx.arc(o.x, o.y, size, 0, Math.PI * 2);
                ctx.fill();
                
                // K value
                ctx.fillStyle = '#000';
                ctx.font = '10px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(o.K.toFixed(1), o.x, o.y + size + 12);
            });
        }
        
        // CALCOLA R PER UN SISTEMA
        function calculateR(oscillators) {
            let sx = 0, sy = 0;
            oscillators.forEach(o => {
                sx += Math.cos(o.phase);
                sy += Math.sin(o.phase);
            });
            
            const N = oscillators.length;
            return Math.sqrt(sx*sx + sy*sy) / N;
        }
        
        // STEP SIMULAZIONE
        function simulationStep() {
            if (!isComparing) return;
            
            time += 0.05;
            const alpha = parseFloat(document.getElementById('alphaSlider').value);
            
            // AGGIORNA SISTEMA EQUO
            updateSystem(equoOscillators, alpha, 'uniform');
            
            // AGGIORNA SISTEMA INIQUO
            updateSystem(iniquoOscillators, alpha, 'exponential');
            
            // DISEGNA E AGGIORNA
            drawBothSystems();
            updateResults();
            
            requestAnimationFrame(simulationStep);
        }
        
        function updateSystem(oscillators, alpha, type) {
            const N = oscillators.length;
            
            oscillators.forEach(o => {
                let sum = 0;
                
                oscillators.forEach(other => {
                    if (o.id !== other.id) {
                        sum += o.K * Math.sin(other.phase - o.phase);
                    }
                });
                
                o.phase += o.freq + (alpha / N) * sum;
                o.phase %= (2 * Math.PI);
            });
        }
        
        // AGGIORNA RISULTATI
        function updateResults() {
            const equoR = calculateR(equoOscillators);
            const iniquoR = calculateR(iniquoOscillators);
            
            document.getElementById('equoR').textContent = equoR.toFixed(3);
            document.getElementById('iniquoR').textContent = iniquoR.toFixed(3);
            
            const delta = equoR - iniquoR;
            document.getElementById('deltaR').textContent = 
                delta >= 0 ? `+${delta.toFixed(3)}` : delta.toFixed(3);
            
            const advantage = equoR > 0 ? ((equoR - iniquoR) / equoR * 100).toFixed(1) : 0;
            document.getElementById('advantage').textContent = `${advantage}%`;
            
            // COLORA IN BASE AL VANTAGGIO
            const deltaElem = document.getElementById('deltaR');
            if (delta > 0.1) {
                deltaElem.className = 'result-value advantage';
            } else if (delta < -0.1) {
                deltaElem.className = 'result-value disadvantage';
            } else {
                deltaElem.className = 'result-value';
            }
        }
        
        // CONTROLLI UTENTE
        function startComparison() {
            if (isComparing) return;
            
            isComparing = true;
            document.getElementById('alphaSlider').addEventListener('input', function() {
                document.getElementById('alphaValue').textContent = this.value;
            });
            
            simulationStep();
        }
        
        function resetComparison() {
            isComparing = false;
            time = 0;
            init();
        }
        
        function runCriticalAlphaTest() {
            alert("üß™ Test Œ± critico avviato!\n\nIl sistema misurer√† quando R supera 0.5 per entrambi i sistemi.\nControlla la console (F12) per i risultati.");
            
            // Test automatico
            let alpha = 0.1;
            const interval = setInterval(() => {
                alpha += 0.1;
                document.getElementById('alphaSlider').value = alpha;
                document.getElementById('alphaValue').textContent = alpha.toFixed(1);
                
                const equoR = calculateR(equoOscillators);
                const iniquoR = calculateR(iniquoOscillators);
                
                console.log(`Œ±=${alpha.toFixed(1)}: Equo R=${equoR.toFixed(3)}, Iniquo R=${iniquoR.toFixed(3)}`);
                
                if (equoR > 0.5 && parseFloat(document.getElementById('alphaCritEquo').textContent) === 0.500) {
                    document.getElementById('alphaCritEquo').textContent = alpha.toFixed(3);
                }
                
                if (iniquoR > 0.5 && parseFloat(document.getElementById('alphaCritIniquo').textContent) === 1.986) {
                    document.getElementById('alphaCritIniquo').textContent = alpha.toFixed(3);
                    clearInterval(interval);
                    
                    const ratio = alpha / parseFloat(document.getElementById('alphaCritEquo').textContent);
                    document.getElementById('discovery').textContent = `${ratio.toFixed(1)}√ó pi√π accoppiamento!`;
                }
                
                if (alpha >= 3.0) clearInterval(interval);
            }, 1000);
        }
        
        // INIZIALIZZA
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>